{"remainingRequest":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/src/views/Publish/index.vue?vue&type=style&index=0&id=196f59f0&scoped=true&lang=css&","dependencies":[{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/src/views/Publish/index.vue","mtime":1642759335880},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/css-loader/dist/cjs.js","mtime":1642048409600},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1642048409940},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/postcss-loader/src/index.js","mtime":1642048409590},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1642048408770},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/vue-loader/lib/index.js","mtime":1642048409780}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWwtcm93IHsKICBtYXJnaW4tYm90dG9tOiAyMHB4Owp9CgouZWwtZGF0ZS1lZGl0b3IuZWwtaW5wdXQgewogIHdpZHRoOiAxMDAlOwp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Publish","sourcesContent":["<template>\n  <div>\n    <!--表单-->\n    <el-form ref=\"contestForm\" :model=\"contestForm\" label-width=\"80px\" label-position=\"top\" :rules=\"rules\">\n      <!--输入比赛名称-->\n      <el-row :gutter=\"20\">\n        <el-col :span=\"16\" :offset=\"4\">\n          <el-card>\n            <el-form-item label=\"比赛名称\" prop=\"contestTitle\">\n              <el-input v-model=\"contestForm.contestTitle\"></el-input>\n            </el-form-item>\n          </el-card>\n        </el-col>\n      </el-row>\n\n      <el-row :gutter=\"20\">\n        <!--左侧编辑内容-->\n        <el-col :span=\"12\" :offset=\"4\">\n          <mdEditor v-model=\"contestForm.contestText\" :ishljs=\"true\" style=\"min-height: 800px\"/>\n        </el-col>\n        <!--右侧输入其他信息-->\n        <el-col :span=\"4\">\n          <el-card>\n            <el-form-item label=\"发布人\">\n              <el-input v-model=\"contestForm.promulgator\" disabled></el-input>\n            </el-form-item>\n            <el-form-item label=\"所属组\">\n              <el-input v-model=\"contestForm.groupName\" disabled></el-input>\n            </el-form-item>\n            <el-form-item label=\"报名开始时间\" prop=\"startTime\">\n              <el-date-picker v-model=\"contestForm.startTime\" type=\"datetime\" placeholder=\"选择日期时间\"\n                              default-time=\"08:00:00\"></el-date-picker>\n            </el-form-item>\n            <el-form-item label=\"报名结束时间\" prop=\"endTime\">\n              <el-date-picker v-model=\"contestForm.endTime\" type=\"datetime\" placeholder=\"选择日期时间\"\n                              default-time=\"23:59:59\"></el-date-picker>\n            </el-form-item>\n            <el-form-item style=\"float: right\">\n              <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\n              <el-button type=\"primary\" @click=\"submitForm\">立即创建</el-button>\n            </el-form-item>\n          </el-card>\n        </el-col>\n      </el-row>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport {getRequest} from \"@/utils/api\";\n\nconst mdEditor = require('mavon-editor')\nimport 'mavon-editor/dist/css/index.css'\n\nexport default {\n  name: \"index\",\n  components: {\n    'mdEditor': mdEditor.mavonEditor\n  },\n  data() {\n    const endTimeCheckout = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('报名结束时间不能为空'));\n      } else if (value < this.contestForm.startTime) {\n        callback(new Error('结束时间不能小于开始时间'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      contestForm: {\n        contestTitle: '',\n        contestText: '## 请输入比赛内容\\n',\n        promulgator: '',\n        groupId: '',\n        groupName: '',\n        startTime: '',\n        endTime: '',\n      },\n      rules: {\n        contestTitle: [{ message: '请输入比赛名称', trigger: 'blur'}],\n        startTime: [{required: true, message: '请输入报名开始时间', trigger: 'blur'}],\n        endTime: [{required: true, validator: endTimeCheckout, trigger: 'blur'}]\n      }\n    };\n  },\n  mounted() {\n    // 页面启动给datetime赋值时间戳\n\n    this.contestForm.promulgator = sessionStorage.getItem(\"name\");\n    const gid = sessionStorage.gid;\n\n    if (gid === \"\"){\n      this.$message.error(\"获取用户组失败！\");\n    }else {\n      getRequest(\"/group/\"+gid).then((resp)=>{\n        console.log(resp.data)\n        this.contestForm.groupName = resp.data.data;\n      })\n\n    }\n\n\n  },\n  methods: {\n    // 提交\n    submitForm() {\n      this.$refs.contestForm.validate((valid) => {\n        if (valid) {\n          alert('submit!');\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    // 重置\n    resetForm() {\n      this.$refs.contestForm.resetFields();\n    }\n  }\n}\n</script>\n\n<style scoped>\n.el-row {\n  margin-bottom: 20px;\n}\n\n.el-date-editor.el-input {\n  width: 100%;\n}\n</style>"]}]}