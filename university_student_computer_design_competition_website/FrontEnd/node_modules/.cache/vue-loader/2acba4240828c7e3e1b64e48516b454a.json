{"remainingRequest":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/src/views/Admin/Main/Groups/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/src/views/Admin/Main/Groups/index.vue","mtime":1646828708930},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1642048410000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/babel-loader/lib/index.js","mtime":1642048410000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1642048410000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/vue-loader/lib/index.js","mtime":1642048410000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0UmVxdWVzdCwgcG9zdFJlcXVlc3QsIHB1dFJlcXVlc3R9IGZyb20gIkAvdXRpbHMvYXBpIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiR3JvdXBzIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW5wdXQ6ICcnLAogICAgICBkaWFsb2c6IGZhbHNlLAogICAgICBtdWx0aXBsZVNlbGVjdGlvbjogW10sCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIGdyb3VwVGl0bGU6ICcnLAogICAgICBncm91cDogewogICAgICAgIGdyb3VwTmFtZTogJycsCiAgICAgICAgZW5jb2Rpbmc6ICcnCiAgICAgIH0sCiAgICAgIGdyb3VwUnVsZXM6IHsKICAgICAgICBncm91cE5hbWU6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLlkI3np7DkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciJ9LAogICAgICAgICAge3BhdHRlcm46IC9eW1x1NGUwMC1cdTlmYTVfYS16QS1aXGRdezEsMTB9JC8sIG1lc3NhZ2U6ICLor7fovpPlhaUxLTEw5L2N5a2X56ymIn1dLAogICAgICAgIGVuY29kaW5nOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi57yW56CB5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIifSwKICAgICAgICAgIHtwYXR0ZXJuOiAvXltcZGEtekEtWl17NX0kLywgbWVzc2FnZTogIuivt+i+k+WFpeS6lOS9jeWtl+avjeaIluaVsOWtl+e7hOWQiOWtl+espiJ9XQogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgZGVsZXRlQnV0dG9uKCkgewogICAgICByZXR1cm4gIXRoaXMubXVsdGlwbGVTZWxlY3Rpb24ubGVuZ3RoOwogICAgfSwKICAgIHNlYXJjaEJ1dHRvbigpIHsKICAgICAgcmV0dXJuICF0aGlzLmlucHV0OwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGlucHV0KG5ld1ZhbHVlKSB7CiAgICAgIGlmIChuZXdWYWx1ZS50cmltKCkgPT09ICIiKSB7CiAgICAgICAgdGhpcy5zZWxlY3RHcm91cHNMaXN0KCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNlbGVjdEdyb3Vwc0xpc3QoKSB7CiAgICAgIGdldFJlcXVlc3QoIi9zZWxlY3RHcm91cHNMaXN0IikudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmRhdGEuZGF0YTsKICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24gPSB2YWw7CiAgICB9LAogICAgZGVsZXRlR3JvdXBzKCkgewogICAgICBwb3N0UmVxdWVzdCgiL2RlbGV0ZUdyb3VwcyIsIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmRhdGEuZGF0YSkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliKDpmaTmiJDlip/jgIIiKTsKICAgICAgICAgIHRoaXMuc2VsZWN0R3JvdXBzTGlzdCgpOwogICAgICAgIH0gZWxzZSB0aGlzLiRtZXNzYWdlLmVycm9yKCLliKDpmaTlpLHotKXvvIzlm6DkuLrnu4TkuIvmnInnlKjmiLfjgIIiKTsKICAgICAgfSkKICAgIH0sCiAgICBzZWFyY2hHcm91cHMoKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuaW5wdXQudHJpbSgpKQogICAgICBnZXRSZXF1ZXN0KCIvc2VhcmNoR3JvdXBzIiwge3F1ZXJ5OiB0aGlzLmlucHV0LnRyaW0oKX0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgIH0pCiAgICB9LAogICAgaW5zZXJ0T3JVcGRhdGUoZGF0YSkgewogICAgICBpZiAoZGF0YSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5ncm91cFRpdGxlID0gJ+a3u+WKoOeUqOaIt+e7hCc7CiAgICAgICAgdGhpcy5ncm91cCA9IHt9OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZ3JvdXBUaXRsZSA9ICfkv67mlLnnlKjmiLfnu4QnOwogICAgICAgIHRoaXMuZ3JvdXAuZ3JvdXBJZCA9IGRhdGEuZ3JvdXBJZDsKICAgICAgICB0aGlzLmdyb3VwLmdyb3VwTmFtZSA9IGRhdGEuZ3JvdXBOYW1lOwogICAgICAgIHRoaXMuZ3JvdXAuZW5jb2RpbmcgPSBkYXRhLmVuY29kaW5nOwogICAgICB9CiAgICAgIHRoaXMuZGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBpbnNlcnRHcm91cHMoKSB7CiAgICAgIHRoaXMuJHJlZnMuZ3JvdXAudmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBwb3N0UmVxdWVzdCgiL2luc2VydEdyb3VwIiwgdGhpcy5ncm91cCkudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RHcm91cHNMaXN0KCk7CiAgICAgICAgICAgIH0gZWxzZSB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZTsKICAgICAgfSkKICAgIH0sCiAgICB1cGRhdGVHcm91cCgpIHsKICAgICAgdGhpcy4kcmVmcy5ncm91cC52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHB1dFJlcXVlc3QoIi91cGRhdGVHcm91cCIsIHRoaXMuZ3JvdXApLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmRhdGEpIHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuS/ruaUueaIkOWKn+OAgiIpOwogICAgICAgICAgICAgIHRoaXMuc2VsZWN0R3JvdXBzTGlzdCgpOwogICAgICAgICAgICB9IGVsc2UgdGhpcy4kbWVzc2FnZS5lcnJvcigi5L+u5pS55aSx6LSl77yBIik7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZTsKICAgICAgfSkKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnNlbGVjdEdyb3Vwc0xpc3QoKTsKICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Admin/Main/Groups","sourcesContent":["<template>\n  <div>\n    <div class=\"box\">\n      <el-button type=\"danger\" icon=\"fa fa-trash-can\" class=\"mr20\" size=\"mini\"\n                 :disabled=\"deleteButton\" @click=\"deleteGroups\">批量删除\n      </el-button>\n      <el-button type=\"primary\" icon=\"fa fa-plus\" size=\"mini\" class=\"mr20\" @click=\"insertOrUpdate()\">添加</el-button>\n      <el-input v-model=\"input\" placeholder=\"请输入搜索值\" class=\"box-input mr20\" size=\"mini\" clearable></el-input>\n      <el-button type=\"primary\" icon=\"fa fa-magnifying-glass\" size=\"mini\" :disabled=\"searchButton\"\n                 @click=\"searchGroups\">搜索\n      </el-button>\n    </div>\n    <el-table :data=\"tableData\" border fit @selection-change=\"handleSelectionChange\">\n      <el-table-column type=\"selection\" hidden></el-table-column>\n      <el-table-column prop=\"groupId\" label=\"ID\" width=\"100%\" align=\"center\"></el-table-column>\n      <el-table-column prop=\"groupName\" label=\"组名称\" width=\"100%\" align=\"center\"></el-table-column>\n      <el-table-column prop=\"encoding\" label=\"组编码\" align=\"center\"></el-table-column>\n      <el-table-column prop=\"number\" label=\"人数\" align=\"center\"></el-table-column>\n      <el-table-column label=\"操作\">\n        <template v-slot=\"scope\">\n          <el-button type=\"warning\" size=\"mini\" @click=\"insertOrUpdate(scope.row)\" round>编辑</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog :title=\"groupTitle\" :visible.sync=\"dialog\" width=\"20%\">\n      <el-form :model=\"group\" :rules=\"groupRules\" ref=\"group\">\n        <el-form-item label=\"组名称\" prop=\"groupName\">\n          <el-input v-model=\"group.groupName\" autocomplete=\"off\" maxlength=\"10\" show-word-limit></el-input>\n        </el-form-item>\n        <el-form-item label=\"组编码\" prop=\"encoding\">\n          <el-input v-model=\"group.encoding\" autocomplete=\"off\" maxlength=\"5\" show-word-limit\n                    @blur=\"group.encoding = group.encoding.replace(/\\s*/g,'').toUpperCase()\">\n          </el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialog = false\">取 消</el-button>\n        <el-button v-if=\"groupTitle==='添加用户组'\" type=\"primary\" @click=\"insertGroups\">添 加</el-button>\n        <el-button v-else type=\"primary\" @click=\"updateGroup\">修 改</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {getRequest, postRequest, putRequest} from \"@/utils/api\";\n\nexport default {\n  name: \"Groups\",\n  data() {\n    return {\n      input: '',\n      dialog: false,\n      multipleSelection: [],\n      tableData: [],\n      groupTitle: '',\n      group: {\n        groupName: '',\n        encoding: ''\n      },\n      groupRules: {\n        groupName: [{required: true, message: \"名称不能为空\", trigger: \"blur\"},\n          {pattern: /^[\\u4e00-\\u9fa5_a-zA-Z\\d]{1,10}$/, message: \"请输入1-10位字符\"}],\n        encoding: [{required: true, message: \"编码不能为空\", trigger: \"blur\"},\n          {pattern: /^[\\da-zA-Z]{5}$/, message: \"请输入五位字母或数字组合字符\"}]\n      }\n    }\n  },\n  computed: {\n    deleteButton() {\n      return !this.multipleSelection.length;\n    },\n    searchButton() {\n      return !this.input;\n    }\n  },\n  watch: {\n    input(newValue) {\n      if (newValue.trim() === \"\") {\n        this.selectGroupsList();\n      }\n    }\n  },\n  methods: {\n    selectGroupsList() {\n      getRequest(\"/selectGroupsList\").then(res => {\n        this.tableData = res.data.data;\n      })\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    deleteGroups() {\n      postRequest(\"/deleteGroups\", this.multipleSelection).then(res => {\n        if (res.data.data) {\n          this.$message.success(\"删除成功。\");\n          this.selectGroupsList();\n        } else this.$message.error(\"删除失败，因为组下有用户。\");\n      })\n    },\n    searchGroups() {\n      console.log(this.input.trim())\n      getRequest(\"/searchGroups\", {query: this.input.trim()}).then(res => {\n        this.tableData = res.data.data;\n      })\n    },\n    insertOrUpdate(data) {\n      if (data === undefined) {\n        this.groupTitle = '添加用户组';\n        this.group = {};\n      } else {\n        this.groupTitle = '修改用户组';\n        this.group.groupId = data.groupId;\n        this.group.groupName = data.groupName;\n        this.group.encoding = data.encoding;\n      }\n      this.dialog = true;\n    },\n    insertGroups() {\n      this.$refs.group.validate((valid) => {\n        if (valid) {\n          postRequest(\"/insertGroup\", this.group).then(res => {\n            if (res.data.code === 200) {\n              this.$message.success(res.data.msg);\n              this.selectGroupsList();\n            } else this.$message.error(res.data.msg);\n          });\n        }\n        this.dialog = false;\n      })\n    },\n    updateGroup() {\n      this.$refs.group.validate((valid) => {\n        if (valid) {\n          putRequest(\"/updateGroup\", this.group).then(res => {\n            if (res.data.data) {\n              this.$message.success(\"修改成功。\");\n              this.selectGroupsList();\n            } else this.$message.error(\"修改失败！\");\n          });\n        }\n        this.dialog = false;\n      })\n    }\n  },\n  mounted() {\n    this.selectGroupsList();\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.box {\n  margin-bottom: 20px;\n}\n\n.box-input {\n  width: 200px;\n  display: inline-block;\n}\n\n.mr20 {\n  margin-right: 20px;\n}\n</style>"]}]}