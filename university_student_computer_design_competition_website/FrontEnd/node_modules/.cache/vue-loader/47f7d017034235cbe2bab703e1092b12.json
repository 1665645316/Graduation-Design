{"remainingRequest":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/src/views/Publish/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/src/views/Publish/index.vue","mtime":1644145438590},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1642048410000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/babel-loader/lib/index.js","mtime":1642048410000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1642048410000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/vue-loader/lib/index.js","mtime":1642048410000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0UmVxdWVzdCwgcG9zdFJlcXVlc3R9IGZyb20gIkAvdXRpbHMvYXBpIjsKCmNvbnN0IG1kRWRpdG9yID0gcmVxdWlyZSgnbWF2b24tZWRpdG9yJykKaW1wb3J0ICdtYXZvbi1lZGl0b3IvZGlzdC9jc3MvaW5kZXguY3NzJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJpbmRleCIsCiAgY29tcG9uZW50czogewogICAgJ21kRWRpdG9yJzogbWRFZGl0b3IubWF2b25FZGl0b3IKICB9LAogIGRhdGEoKSB7CiAgICBjb25zdCByZWdFbmRUaW1lQ2hlY2tvdXQgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+aKpeWQjee7k+adn+aXtumXtOS4jeiDveS4uuepuicpKTsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSA8IHRoaXMuY29udGVzdEZvcm0ucmVnU3RhcnRUaW1lKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfmiqXlkI3nu5PmnZ/ml7bpl7TkuI3og73lsI/kuo7miqXlkI3lvIDlp4vml7bpl7QnKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IHN0YXJ0VGltZUNoZWNrb3V0ID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAodmFsdWUgPT09ICcnKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfmiqXlkI3nu5PmnZ/ml7bpl7TkuI3og73kuLrnqbonKSk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPCB0aGlzLmNvbnRlc3RGb3JtLnJlZ0VuZFRpbWUpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+avlOi1m+W8gOWni+aXtumXtOS4jeiDveWwj+S6juaKpeWQjee7k+adn+aXtumXtCcpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwogICAgY29uc3QgZW5kVGltZUNoZWNrb3V0ID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAodmFsdWUgPT09ICcnKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfmiqXlkI3nu5PmnZ/ml7bpl7TkuI3og73kuLrnqbonKSk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPCB0aGlzLmNvbnRlc3RGb3JtLnN0YXJ0VGltZSkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5q+U6LWb57uT5p2f5pe26Ze05LiN6IO95bCP5LqO5q+U6LWb5byA5aeL5pe26Ze0JykpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CiAgICByZXR1cm4gewogICAgICBjb250ZXN0Rm9ybTogewogICAgICAgIGNvbnRlc3RUaXRsZTogJycsCiAgICAgICAgY29udGVzdFRleHQ6ICcnLAogICAgICAgIHVybDogJycsCiAgICAgICAgdGV4dDogJyMjIOivt+i+k+WFpeavlOi1m+WGheWuuVxuJywKICAgICAgICBuYW1lOiAnJywKICAgICAgICBwcm9tdWxnYXRvcjogJycsCiAgICAgICAgZ3JvdXBJZDogJycsCiAgICAgICAgZ3JvdXBOYW1lOiAnJywKICAgICAgICByZWdTdGFydFRpbWU6ICcnLAogICAgICAgIHJlZ0VuZFRpbWU6ICcnLAogICAgICAgIHN0YXJ0VGltZTogJycsCiAgICAgICAgZW5kVGltZTogJycsCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgY29udGVzdFRpdGxlOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5q+U6LWb5ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInfV0sCiAgICAgICAgdXJsOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5Zu+54mH5Zyw5Z2AJywgdHJpZ2dlcjogJ2JsdXInfV0sCiAgICAgICAgcmVnU3RhcnRUaW1lOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5oql5ZCN5byA5aeL5pe26Ze05LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInfV0sCiAgICAgICAgcmVnRW5kVGltZTogW3tyZXF1aXJlZDogdHJ1ZSwgdmFsaWRhdG9yOiByZWdFbmRUaW1lQ2hlY2tvdXQsIHRyaWdnZXI6ICdibHVyJ31dLAogICAgICAgIHN0YXJ0VGltZTogW3tyZXF1aXJlZDogdHJ1ZSwgdmFsaWRhdG9yOiBzdGFydFRpbWVDaGVja291dCwgdHJpZ2dlcjogJ2JsdXInfV0sCiAgICAgICAgZW5kVGltZTogW3tyZXF1aXJlZDogdHJ1ZSwgdmFsaWRhdG9yOiBlbmRUaW1lQ2hlY2tvdXQsIHRyaWdnZXI6ICdibHVyJ31dCiAgICAgIH0KICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgLy8g6aG16Z2i5ZCv5Yqo57uZZGF0ZXRpbWXotYvlgLzml7bpl7TmiLMKICAgIGNvbnN0IGdpZCA9IHNlc3Npb25TdG9yYWdlLmdpZDsKICAgIGlmIChnaWQgPT09ICIiKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuiOt+WPlueUqOaIt+e7hOWksei0pe+8gSIpOwogICAgfSBlbHNlIHsKICAgICAgZ2V0UmVxdWVzdCgiL2dyb3VwLyIgKyBnaWQpLnRoZW4oKHJlc3ApID0+IHsKICAgICAgICB0aGlzLmNvbnRlc3RGb3JtLnByb211bGdhdG9yID0gc2Vzc2lvblN0b3JhZ2UudWlkOwogICAgICAgIHRoaXMuY29udGVzdEZvcm0ubmFtZSA9IHNlc3Npb25TdG9yYWdlLm5hbWU7CiAgICAgICAgdGhpcy5jb250ZXN0Rm9ybS5ncm91cElkID0gZ2lkOwogICAgICAgIHRoaXMuY29udGVzdEZvcm0uZ3JvdXBOYW1lID0gcmVzcC5kYXRhLmRhdGE7CiAgICAgIH0pCgogICAgfQoKCiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDmj5DkuqQKICAgIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHRoaXMuY29udGVzdEZvcm0uY29udGVzdFRleHQgPSB0aGlzLmNvbnRlc3RGb3JtLnRleHQucmVwbGFjZSgvXG4vaWcsICI8YnI+Iik7CiAgICAgIHRoaXMuJHJlZnMuY29udGVzdEZvcm0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBwb3N0UmVxdWVzdCgiL2FkZENvbnRlc3RzIiwgdGhpcy5jb250ZXN0Rm9ybSkudGhlbigocmVzcCkgPT4gewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwKTsKICAgICAgICAgICAgaWYocmVzcCl7CiAgICAgICAgICAgICAgLy8gdGhpcy4kY29uZmlybShyZXNwLmRhdGEubXNnLCAn5L+h5oGvJywge2NvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywgdHlwZTogJ3N1Y2Nlc3MnLCBjZW50ZXI6IHRydWV9KQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXNwLmRhdGEubXNnKTsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2hvbWUiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+35L+u5pS56ZSZ6K+v6aG577yBIikKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOmHjee9rgogICAgcmVzZXRGb3JtKCkgewogICAgICB0aGlzLiRyZWZzLmNvbnRlc3RGb3JtLnJlc2V0RmllbGRzKCk7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Publish","sourcesContent":["<template>\n  <div>\n    <!--表单-->\n    <el-form ref=\"contestForm\" :model=\"contestForm\" label-width=\"80px\" label-position=\"top\" :rules=\"rules\">\n      <!--输入比赛名称-->\n      <el-row :gutter=\"20\">\n        <el-col :span=\"16\" :offset=\"4\">\n          <el-card>\n            <el-form-item label=\"比赛名称\" prop=\"contestTitle\">\n              <el-input v-model=\"contestForm.contestTitle\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"图片url\" prop=\"url\">\n              <el-input v-model=\"contestForm.url\"\n                        placeholder=\"输入图片的地址，例如：https://pic.imgdb.cn/item/61e95e482ab3f51d91903853.jpg\"></el-input>\n            </el-form-item>\n          </el-card>\n        </el-col>\n      </el-row>\n\n      <el-row :gutter=\"20\">\n        <!--左侧编辑内容-->\n        <el-col :span=\"12\" :offset=\"4\">\n          <el-card :body-style=\"{ padding: '0'}\">\n            <mdEditor v-model=\"contestForm.text\" :ishljs=\"true\" style=\"min-height: 600px\"/>\n          </el-card>\n        </el-col>\n        <!--右侧输入其他信息-->\n        <el-col :span=\"4\">\n          <el-card style=\"min-height: 600px\">\n            <el-form-item label=\"报名开始时间\" prop=\"regStartTime\">\n              <el-date-picker v-model=\"contestForm.regStartTime\" type=\"datetime\" placeholder=\"选择日期时间\"\n                              default-time=\"08:00:00\" value-format=\"yyyy-MM-dd HH:mm:ss\"></el-date-picker>\n            </el-form-item>\n            <el-form-item label=\"报名结束时间\" prop=\"regEndTime\">\n              <el-date-picker v-model=\"contestForm.regEndTime\" type=\"datetime\" placeholder=\"选择日期时间\"\n                              default-time=\"23:59:59\" value-format=\"yyyy-MM-dd HH:mm:ss\"></el-date-picker>\n            </el-form-item>\n            <el-form-item label=\"比赛开始时间\" prop=\"startTime\">\n              <el-date-picker v-model=\"contestForm.startTime\" type=\"datetime\" placeholder=\"选择日期时间\"\n                              default-time=\"08:00:00\" value-format=\"yyyy-MM-dd HH:mm:ss\"></el-date-picker>\n            </el-form-item>\n            <el-form-item label=\"比赛结束时间\" prop=\"endTime\">\n              <el-date-picker v-model=\"contestForm.endTime\" type=\"datetime\" placeholder=\"选择日期时间\"\n                              default-time=\"23:59:59\" value-format=\"yyyy-MM-dd HH:mm:ss\"></el-date-picker>\n            </el-form-item>\n            <el-form-item style=\"float: right;padding-top: 60px\">\n              <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\n              <el-button type=\"primary\" @click=\"submitForm\">立即创建</el-button>\n            </el-form-item>\n          </el-card>\n        </el-col>\n      </el-row>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport {getRequest, postRequest} from \"@/utils/api\";\n\nconst mdEditor = require('mavon-editor')\nimport 'mavon-editor/dist/css/index.css'\n\nexport default {\n  name: \"index\",\n  components: {\n    'mdEditor': mdEditor.mavonEditor\n  },\n  data() {\n    const regEndTimeCheckout = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('报名结束时间不能为空'));\n      } else if (value < this.contestForm.regStartTime) {\n        callback(new Error('报名结束时间不能小于报名开始时间'));\n      } else {\n        callback();\n      }\n    };\n    const startTimeCheckout = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('报名结束时间不能为空'));\n      } else if (value < this.contestForm.regEndTime) {\n        callback(new Error('比赛开始时间不能小于报名结束时间'));\n      } else {\n        callback();\n      }\n    };\n    const endTimeCheckout = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('报名结束时间不能为空'));\n      } else if (value < this.contestForm.startTime) {\n        callback(new Error('比赛结束时间不能小于比赛开始时间'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      contestForm: {\n        contestTitle: '',\n        contestText: '',\n        url: '',\n        text: '## 请输入比赛内容\\n',\n        name: '',\n        promulgator: '',\n        groupId: '',\n        groupName: '',\n        regStartTime: '',\n        regEndTime: '',\n        startTime: '',\n        endTime: '',\n      },\n      rules: {\n        contestTitle: [{required: true, message: '请输入比赛名称', trigger: 'blur'}],\n        url: [{required: true, message: '请输入图片地址', trigger: 'blur'}],\n        regStartTime: [{required: true, message: '报名开始时间不能为空', trigger: 'blur'}],\n        regEndTime: [{required: true, validator: regEndTimeCheckout, trigger: 'blur'}],\n        startTime: [{required: true, validator: startTimeCheckout, trigger: 'blur'}],\n        endTime: [{required: true, validator: endTimeCheckout, trigger: 'blur'}]\n      }\n    };\n  },\n  mounted() {\n    // 页面启动给datetime赋值时间戳\n    const gid = sessionStorage.gid;\n    if (gid === \"\") {\n      this.$message.error(\"获取用户组失败！\");\n    } else {\n      getRequest(\"/group/\" + gid).then((resp) => {\n        this.contestForm.promulgator = sessionStorage.uid;\n        this.contestForm.name = sessionStorage.name;\n        this.contestForm.groupId = gid;\n        this.contestForm.groupName = resp.data.data;\n      })\n\n    }\n\n\n  },\n  methods: {\n    // 提交\n    submitForm() {\n      this.contestForm.contestText = this.contestForm.text.replace(/\\n/ig, \"<br>\");\n      this.$refs.contestForm.validate((valid) => {\n        if (valid) {\n          postRequest(\"/addContests\", this.contestForm).then((resp) => {\n            // console.log(resp);\n            if(resp){\n              // this.$confirm(resp.data.msg, '信息', {confirmButtonText: '确定', type: 'success', center: true})\n              this.$message.success(resp.data.msg);\n              this.$router.push(\"/home\");\n            }\n          })\n        } else {\n          this.$message.error(\"请修改错误项！\")\n          return false;\n        }\n      });\n    },\n    // 重置\n    resetForm() {\n      this.$refs.contestForm.resetFields();\n    }\n  }\n}\n</script>\n\n<style scoped>\n.el-row {\n  margin-bottom: 20px;\n}\n\n.el-date-editor.el-input {\n  width: 100%;\n}\n</style>"]}]}