{"remainingRequest":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/src/views/layout/Main/Mine/Information.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/src/views/layout/Main/Mine/Information.vue","mtime":1644475726140},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1642048410000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/babel-loader/lib/index.js","mtime":1642048410000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1642048410000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/vue-loader/lib/index.js","mtime":1642048410000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0UmVxdWVzdCwgcHV0UmVxdWVzdH0gZnJvbSAiQC91dGlscy9hcGkiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJpbmZvcm1hdGlvbiIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlucHV0RGlzYWJsZWQ6IHRydWUsCiAgICAgIGZyb21EYXRhOiB7CiAgICAgICAgdXNlcklkOiAnJywKICAgICAgICBuYW1lOiAnJywKICAgICAgICBiaXJ0aGRheTogJycsCiAgICAgICAgc2Nob29sOiAnJywKICAgICAgICBhZGRyZXNzOiAnJwogICAgICB9LAogICAgICBzZXg6JycsCiAgICAgIGdyb3VwTmFtZTogJycsCiAgICAgIHBob25lOiAnJywKICAgICAgZW1haWw6ICcnCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgY29uc3QgdWlkID0gdGhpcy5mcm9tRGF0YS51c2VySWQgPSBzZXNzaW9uU3RvcmFnZS51aWQ7CiAgICBnZXRSZXF1ZXN0KCIvdXNlci8iICsgdWlkKS50aGVuKChyZXMpID0+IHsKICAgICAgY29uc3QgZGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICBpZiAoZGF0YSkgewogICAgICAgIHRoaXMuZnJvbURhdGEubmFtZSA9IGRhdGEubmFtZTsKICAgICAgICBkYXRhLnNleCAgPyB0aGlzLnNleCA9ICfnlLcnIDogdGhpcy5zZXggPSAn5aWzJzsKICAgICAgICB0aGlzLmZyb21EYXRhLmJpcnRoZGF5ID0gZGF0YS5iaXJ0aGRheTsKICAgICAgICB0aGlzLmZyb21EYXRhLnNjaG9vbCA9IGRhdGEuc2Nob29sOwogICAgICAgIHRoaXMuZnJvbURhdGEuYWRkcmVzcyA9IGRhdGEuYWRkcmVzczsKICAgICAgICB0aGlzLnBob25lID0gZGF0YS5waG9uZTsKICAgICAgICB0aGlzLmVtYWlsID0gZGF0YS5lbWFpbDsKICAgICAgICB0aGlzLmdyb3VwTmFtZSA9IGRhdGEuZ3JvdXBOYW1lOwogICAgICB9CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZSgpIHsKICAgICAgdGhpcy5pbnB1dERpc2FibGVkID0gZmFsc2U7CiAgICB9LAogICAgc3VibWl0KCkgewogICAgICBpZiAodGhpcy5mcm9tRGF0YS5uYW1lLnRyaW0oKSA9PT0nJyB8fCB0aGlzLmZyb21EYXRhLmJpcnRoZGF5LnRyaW0oKSA9PT0nJyB8fCB0aGlzLmZyb21EYXRhLmFkZHJlc3MudHJpbSgpPT09JycgIHx8IHRoaXMuZnJvbURhdGEuc2Nob29sLnRyaW0oKT09PScnICl7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5LiN5YWB6K645Li656m6Iik7CiAgICAgIH1lbHNlewogICAgICAgIHB1dFJlcXVlc3QoIi91c2VyL3VwZGF0ZSIsIHRoaXMuZnJvbURhdGEpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5kYXRhLmRhdGEpewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOwogICAgICAgICAgICB0aGlzLmlucHV0RGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgfWVsc2UgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLkv67mlLnlpLHotKUiKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["Information.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Information.vue","sourceRoot":"src/views/layout/Mine","sourcesContent":["<template>\n  <el-card class=\"box-card\" shadow=\"never\" style=\"height: 500px\">\n    <el-descriptions title=\"用户信息\" :column=\"1\" border :labelStyle=\"{'text-align': 'center'}\">\n      <template slot=\"extra\" v-if=\"inputDisabled\">\n        <el-button type=\"success\" @click=\"update\" size=\"small\" round>修改信息</el-button>\n      </template>\n      <template slot=\"extra\" v-else>\n        <el-button type=\"primary\" @click=\"submit\" size=\"small\" round>保存修改</el-button>\n      </template>\n      <el-descriptions-item label=\"姓名\">\n        <input :disabled=\"inputDisabled\" v-model=\"fromData.name\"></input>\n      </el-descriptions-item>\n      <el-descriptions-item label=\"用户组\" :contentStyle=\"{backgroundColor:inputDisabled?'#fff':'#fafafa'}\">\n        <input disabled v-model=\"groupName\" :style=\"{backgroundColor:inputDisabled?'#fff':'#fafafa'}\"></input>\n      </el-descriptions-item>\n      <el-descriptions-item label=\"性别\" :contentStyle=\"{backgroundColor:inputDisabled?'#fff':'#fafafa'}\">\n        <input disabled v-model=\"sex\" :style=\"{backgroundColor:inputDisabled?'#fff':'#fafafa'}\"></input>\n      </el-descriptions-item>\n      <el-descriptions-item label=\"出生日期\">\n        <el-date-picker :disabled=\"inputDisabled\" v-model=\"fromData.birthday\" type=\"date\"\n                        value-format=\"yyyy-MM-dd\" format=\"yyyy 年 MM 月 dd 日\"></el-date-picker>\n      </el-descriptions-item>\n      <el-descriptions-item label=\"学校\">\n        <input :disabled=\"inputDisabled\" v-model=\"fromData.school\"></input>\n      </el-descriptions-item>\n      <el-descriptions-item label=\"手机号\" :contentStyle=\"{backgroundColor:inputDisabled?'#fff':'#fafafa'}\">\n        <input disabled v-model=\"phone\" :style=\"{backgroundColor:inputDisabled?'#fff':'#fafafa'}\"></input>\n      </el-descriptions-item>\n      <el-descriptions-item label=\"邮箱\" :contentStyle=\"{backgroundColor:inputDisabled?'#fff':'#fafafa'}\">\n        <input disabled v-model=\"email\" :style=\"{backgroundColor:inputDisabled?'#fff':'#fafafa'}\"></input>\n      </el-descriptions-item>\n      <el-descriptions-item label=\"地址\">\n        <textarea :disabled=\"inputDisabled\" v-model=\"fromData.address\"></textarea>\n      </el-descriptions-item>\n    </el-descriptions>\n  </el-card>\n</template>\n\n<script>\nimport {getRequest, putRequest} from \"@/utils/api\";\n\nexport default {\n  name: \"information\",\n  data() {\n    return {\n      inputDisabled: true,\n      fromData: {\n        userId: '',\n        name: '',\n        birthday: '',\n        school: '',\n        address: ''\n      },\n      sex:'',\n      groupName: '',\n      phone: '',\n      email: ''\n    }\n  },\n  mounted() {\n    const uid = this.fromData.userId = sessionStorage.uid;\n    getRequest(\"/user/\" + uid).then((res) => {\n      const data = res.data.data;\n      console.log(data);\n      if (data) {\n        this.fromData.name = data.name;\n        data.sex  ? this.sex = '男' : this.sex = '女';\n        this.fromData.birthday = data.birthday;\n        this.fromData.school = data.school;\n        this.fromData.address = data.address;\n        this.phone = data.phone;\n        this.email = data.email;\n        this.groupName = data.groupName;\n      }\n    });\n  },\n  methods: {\n    update() {\n      this.inputDisabled = false;\n    },\n    submit() {\n      if (this.fromData.name.trim() ==='' || this.fromData.birthday.trim() ==='' || this.fromData.address.trim()===''  || this.fromData.school.trim()==='' ){\n        this.$message.error(\"不允许为空\");\n      }else{\n        putRequest(\"/user/update\", this.fromData).then((res) => {\n          if (res.data.data){\n            this.$message.success(\"修改成功\");\n            this.inputDisabled = true;\n          }else {\n            this.$message.error(\"修改失败\");\n          }\n        });\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\ninput, textarea {\n  border: none;\n  outline: none;\n  width: 100%;\n  background-color: #fff;\n  resize: none;\n}\n</style>"]}]}