{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\Graduation_Design\\university_student_computer_design_competition_website\\FrontEnd\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\Graduation_Design\\university_student_computer_design_competition_website\\FrontEnd\\src\\views\\Login\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\Graduation_Design\\university_student_computer_design_competition_website\\FrontEnd\\src\\views\\Login\\index.vue","mtime":1643010168290},{"path":"C:\\Users\\Administrator\\Desktop\\Graduation_Design\\university_student_computer_design_competition_website\\FrontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642048408770},{"path":"C:\\Users\\Administrator\\Desktop\\Graduation_Design\\university_student_computer_design_competition_website\\FrontEnd\\node_modules\\babel-loader\\lib\\index.js","mtime":1642048409360},{"path":"C:\\Users\\Administrator\\Desktop\\Graduation_Design\\university_student_computer_design_competition_website\\FrontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642048408770},{"path":"C:\\Users\\Administrator\\Desktop\\Graduation_Design\\university_student_computer_design_competition_website\\FrontEnd\\node_modules\\vue-loader\\lib\\index.js","mtime":1642048409780}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0UmVxdWVzdCwgcG9zdFJlcXVlc3R9IGZyb20gIkAvdXRpbHMvYXBpIjsKaW1wb3J0IHtsb2dpbn0gZnJvbSAiQC91dGlscy9sb2dpbiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxvZ2luIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hlY2tlZDogdHJ1ZSwKICAgICAgbG9naW5Gb3JtOiB7CiAgICAgICAgcGhvbmU6ICIiLAogICAgICAgIGVtYWlsOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgICAgZGF0ZXRpbWU6ICIiLAogICAgICAgIGNhcHRjaGE6ICIiLAogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHBhc3N3b3JkOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi5a+G56CB5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIifSxdLAogICAgICAgIGNhcHRjaGE6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLpqozor4HnoIHkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciJ9LF0sCiAgICAgIH0sCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIC8vIOmhtemdouWQr+WKqOe7mWRhdGV0aW1l6LWL5YC85pe26Ze05oizCiAgICB0aGlzLmxvZ2luRm9ybS5kYXRldGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgLy8g5Yik5pat5piv5ZCm5a2Y5Zyo55m75b2V5L+h5oGvCiAgICBsb2dpbigpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNhcHRjaGEoKSB7CiAgICAgIHJldHVybiAnL2FwaS9jYXB0Y2hhP2RhdGVUaW1lPScgKyB0aGlzLmxvZ2luRm9ybS5kYXRldGltZTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOeCueWHu+abtOaNoumqjOivgeegge+8iOWwhuadpeabtOaNoumqjOivgeaWueW8j++8iQogICAgdXBkYXRlQ2FwdGNoYSgpIHsKICAgICAgdGhpcy5sb2dpbkZvcm0uZGF0ZXRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgIH0sCiAgICAvKioKICAgICAqIOagueaNrnRhYnPmoIfnrb7pobXov5Tlm57nm7jlupTnmoTpqozor4Hop4TliJkKICAgICAqIEBwYXJhbSBhY3RpdmVOYW1lIOWIh+aNouagh+etvuWQjueahOaWsOWAvAogICAgICovCiAgICBsZWF2ZVRhYihhY3RpdmVOYW1lKSB7CiAgICAgIC8vIGFsZXJ0KGFjdGl2ZU5hbWUpCiAgICAgIHN3aXRjaCAoYWN0aXZlTmFtZSkgewogICAgICAgIGNhc2UgJzAnOgogICAgICAgICAgZGVsZXRlIHRoaXMucnVsZXMuZW1haWw7CiAgICAgICAgICB0aGlzLnJ1bGVzLnBob25lID0gW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuaJi+acuuWPt+S4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIn0sXTsKICAgICAgICAgIHRoaXMubG9naW5Gb3JtLnBob25lID0gIiI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICcxJzoKICAgICAgICAgIGRlbGV0ZSB0aGlzLnJ1bGVzLnBob25lOwogICAgICAgICAgdGhpcy5ydWxlcy5lbWFpbCA9IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLpgq7nrrHkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciJ9LF07CiAgICAgICAgICB0aGlzLmxvZ2luRm9ybS5lbWFpbCA9ICIiOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgdGhpcy5sb2dpbkZvcm0ucGFzc3dvcmQgPSAiIjsKCgogICAgfSwKICAgIC8v55m75b2V54K55Ye75LqL5Lu2CiAgICBsb2dpbigpIHsKICAgICAgdGhpcy4kcmVmcy5sb2dpbkZvcm0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBwb3N0UmVxdWVzdCgiL2xvZ2luIiwgdGhpcy5sb2dpbkZvcm0pLnRoZW4oKHJlc3ApID0+IHsKICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkgewogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1aWQiLCByZXNwLmRhdGEuZGF0YVswXS51c2VySWQpOwogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJuYW1lIiwgcmVzcC5kYXRhLmRhdGFbMF0ubmFtZSk7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImdpZCIsIHJlc3AuZGF0YS5kYXRhWzBdLmdyb3VwSWQpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInVpZCIsIHJlc3AuZGF0YS5kYXRhWzBdLnVzZXJJZCkKICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJuYW1lIiwgcmVzcC5kYXRhLmRhdGFbMF0ubmFtZSk7CiAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiZ2lkIiwgcmVzcC5kYXRhLmRhdGFbMF0uZ3JvdXBJZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9ob21lIik7CiAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+36L6T5YWl5a6M5pW077yBIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+i3s+i9rOazqOWGjOmhtemdogogICAgZ29Ub1JlZ2lzdGVyUGFnZSgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9yZWdpc3RlciIpOwogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Login","sourcesContent":["<template>\n  <div>\n    <el-form :rules=\"rules\" ref=\"loginForm\" :model=\"loginForm\" class=\"loginContainer\">\n      <h3 style=\"text-align: center\">登录</h3>\n      <el-tabs tab-position=\"top\" style=\"height: 100px\" stretch :before-leave=\"leaveTab\">\n        <el-tab-pane label=\"手机号登录\">\n          <el-form-item prop=\"phone\">\n            <el-input tpye=\"text\" v-model=\"loginForm.phone\" placeholder=\"请输入手机号\"></el-input>\n          </el-form-item>\n        </el-tab-pane>\n        <el-tab-pane label=\"邮箱登录\">\n          <el-form-item prop=\"email\">\n            <el-input tpye=\"text\" v-model=\"loginForm.email\" placeholder=\"请输入邮箱\"></el-input>\n          </el-form-item>\n        </el-tab-pane>\n      </el-tabs>\n      <el-form-item prop=\"password\">\n        <el-input tpye=\"text\" v-model=\"loginForm.password\" placeholder=\"请输入密码\"></el-input>\n      </el-form-item>\n      <el-form-item prop=\"captcha\">\n        <el-input tpye=\"text\" v-model=\"loginForm.captcha\" placeholder=\"点击图片更换验证码\" style=\"width: 60%\"></el-input>\n        <img :src=\"captcha\" @click=\"updateCaptcha\" alt=\"验证码\"\n             style=\"float: right; cursor: pointer\"/>\n      </el-form-item>\n      <el-form-item style=\"margin-bottom: 0\">\n        <el-link :underline=\"false\" class=\"rememberMe\">\n          <el-checkbox v-model=\"checked\">保持登录</el-checkbox>\n        </el-link>\n        <el-link href=\"https://zhangguapi.com\" target=\"_blank\" :underline=\"false\" class=\"forgot\">忘记密码？</el-link>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" style=\"width: 48%\" @click=\"login\" round>登录</el-button>\n        <el-button type=\"success\" style=\"width: 48%; float: right\" @click=\"goToRegisterPage\" round>注册</el-button>\n      </el-form-item>\n    </el-form>\n    <div class=\"img\">\n      <img src=\"https://i.loli.net/2019/04/23/5cbf0a3fe48e9.png\" alt=\"\"/>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {getRequest, postRequest} from \"@/utils/api\";\nimport {login} from \"@/utils/login\";\n\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      checked: true,\n      loginForm: {\n        phone: \"\",\n        email: \"\",\n        password: \"\",\n        datetime: \"\",\n        captcha: \"\",\n      },\n      rules: {\n        password: [{required: true, message: \"密码不能为空\", trigger: \"blur\"},],\n        captcha: [{required: true, message: \"验证码不能为空\", trigger: \"blur\"},],\n      },\n    };\n  },\n  mounted() {\n    // 页面启动给datetime赋值时间戳\n    this.loginForm.datetime = new Date().getTime();\n    // 判断是否存在登录信息\n    login();\n  },\n  computed: {\n    captcha() {\n      return '/api/captcha?dateTime=' + this.loginForm.datetime;\n    }\n  },\n  methods: {\n    // 点击更换验证码（将来更换验证方式）\n    updateCaptcha() {\n      this.loginForm.datetime = new Date().getTime();\n    },\n    /**\n     * 根据tabs标签页返回相应的验证规则\n     * @param activeName 切换标签后的新值\n     */\n    leaveTab(activeName) {\n      // alert(activeName)\n      switch (activeName) {\n        case '0':\n          delete this.rules.email;\n          this.rules.phone = [{required: true, message: \"手机号不能为空\", trigger: \"blur\"},];\n          this.loginForm.phone = \"\";\n          break;\n        case '1':\n          delete this.rules.phone;\n          this.rules.email = [{required: true, message: \"邮箱不能为空\", trigger: \"blur\"},];\n          this.loginForm.email = \"\";\n          break;\n      }\n      this.loginForm.password = \"\";\n\n\n    },\n    //登录点击事件\n    login() {\n      this.$refs.loginForm.validate((valid) => {\n        if (valid) {\n          postRequest(\"/login\", this.loginForm).then((resp) => {\n            if (this.checked) {\n              localStorage.setItem(\"uid\", resp.data.data[0].userId);\n              localStorage.setItem(\"name\", resp.data.data[0].name);\n              localStorage.setItem(\"gid\", resp.data.data[0].groupId);\n            } else {\n              sessionStorage.setItem(\"uid\", resp.data.data[0].userId)\n              sessionStorage.setItem(\"name\", resp.data.data[0].name);\n              sessionStorage.setItem(\"gid\", resp.data.data[0].groupId);\n            }\n            this.$router.push(\"/home\");\n          }).catch((error) => {\n            console.log(error)\n          });\n        } else {\n          this.$message.error(\"请输入完整！\");\n        }\n      });\n    },\n    //跳转注册页面\n    goToRegisterPage() {\n      this.$router.push(\"/register\");\n    }\n  },\n};\n</script>\n<style>\n.loginContainer {\n  border-radius: 15px;\n  background-clip: padding-box;\n  margin: 180px auto;\n  width: 350px;\n  padding: 15px 35px;\n  background: #fff;\n  border: 1px solid #eeeeee;\n  box-shadow: 0 0 25px #cac6c6;\n}\n\n.rememberMe {\n  margin: 0 0 10px 0;\n}\n\n.forgot {\n  float: right;\n  margin: 0 0 10px 0;\n}\n\n.el-tabs {\n  margin-bottom: 22px;\n}\n\n.img {\n  margin-top: -150px;\n  text-align: center;\n}\n</style>"]}]}