{"remainingRequest":"G:\\Graduation_Design\\university_student_computer_design_competition_website\\FrontEnd\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\Graduation_Design\\university_student_computer_design_competition_website\\FrontEnd\\src\\views\\layout\\Main\\Management\\Competition\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\Graduation_Design\\university_student_computer_design_competition_website\\FrontEnd\\src\\views\\layout\\Main\\Management\\Competition\\index.vue","mtime":1646281773590},{"path":"G:\\Graduation_Design\\university_student_computer_design_competition_website\\FrontEnd\\node_modules\\babel-loader\\lib\\index.js","mtime":1642048410000},{"path":"G:\\Graduation_Design\\university_student_computer_design_competition_website\\FrontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642048410000},{"path":"G:\\Graduation_Design\\university_student_computer_design_competition_website\\FrontEnd\\node_modules\\vue-loader\\lib\\index.js","mtime":1642048410000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0UmVxdWVzdCwgcG9zdFJlcXVlc3QsIHB1dFJlcXVlc3R9IGZyb20gIkAvdXRpbHMvYXBpIjsKCmltcG9ydCAnbWF2b24tZWRpdG9yL2Rpc3QvY3NzL2luZGV4LmNzcycKCmNvbnN0IG1kRWRpdG9yID0gcmVxdWlyZSgnbWF2b24tZWRpdG9yJykKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ29tcGV0aXRpb24iLAogIGNvbXBvbmVudHM6IHsKICAgICdtZEVkaXRvcic6IG1kRWRpdG9yLm1hdm9uRWRpdG9yCiAgfSwKICBkYXRhKCkgewogICAgY29uc3QgcmVnRW5kVGltZUNoZWNrb3V0ID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAodmFsdWUgPT09ICcnKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfmiqXlkI3nu5PmnZ/ml7bpl7TkuI3og73kuLrnqbonKSk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPCB0aGlzLmNvbnRlc3RGb3JtLnJlZ1N0YXJ0VGltZSkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5oql5ZCN57uT5p2f5pe26Ze05LiN6IO95bCP5LqO5oql5ZCN5byA5aeL5pe26Ze0JykpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBzdGFydFRpbWVDaGVja291dCA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKHZhbHVlID09PSAnJykgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5oql5ZCN57uT5p2f5pe26Ze05LiN6IO95Li656m6JykpOwogICAgICB9IGVsc2UgaWYgKHZhbHVlIDwgdGhpcy5jb250ZXN0Rm9ybS5yZWdFbmRUaW1lKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfmr5TotZvlvIDlp4vml7bpl7TkuI3og73lsI/kuo7miqXlkI3nu5PmnZ/ml7bpl7QnKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGVuZFRpbWVDaGVja291dCA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKHZhbHVlID09PSAnJykgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5oql5ZCN57uT5p2f5pe26Ze05LiN6IO95Li656m6JykpOwogICAgICB9IGVsc2UgaWYgKHZhbHVlIDwgdGhpcy5jb250ZXN0Rm9ybS5zdGFydFRpbWUpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+avlOi1m+e7k+adn+aXtumXtOS4jeiDveWwj+S6juavlOi1m+W8gOWni+aXtumXtCcpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgYWRkT3JVcGRhdGU6IHRydWUsCiAgICAgIGJ0blRleHQ6ICfnq4vljbPlj5HluIMnLAogICAgICBjb250ZXN0Rm9ybTogewogICAgICAgIGNvbnRlc3RUaXRsZTogJycsCiAgICAgICAgY29udGVzdFRleHQ6ICcjIyDor7fovpPlhaXmr5TotZvlhoXlrrlcbicsCiAgICAgICAgdXJsOiAnJywKICAgICAgICBwcm9tdWxnYXRvcjogMCwKICAgICAgICBncm91cElkOiAwLAogICAgICAgIHJlZ1N0YXJ0VGltZTogJycsCiAgICAgICAgcmVnRW5kVGltZTogJycsCiAgICAgICAgc3RhcnRUaW1lOiAnJywKICAgICAgICBlbmRUaW1lOiAnJwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIGNvbnRlc3RUaXRsZTogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeavlOi1m+WQjeensCcsIHRyaWdnZXI6ICdibHVyJ31dLAogICAgICAgIHVybDogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWbvueJh+WcsOWdgCcsIHRyaWdnZXI6ICdibHVyJ31dLAogICAgICAgIHJlZ1N0YXJ0VGltZTogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+aKpeWQjeW8gOWni+aXtumXtOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJ31dLAogICAgICAgIHJlZ0VuZFRpbWU6IFt7cmVxdWlyZWQ6IHRydWUsIHZhbGlkYXRvcjogcmVnRW5kVGltZUNoZWNrb3V0LCB0cmlnZ2VyOiAnYmx1cid9XSwKICAgICAgICBzdGFydFRpbWU6IFt7cmVxdWlyZWQ6IHRydWUsIHZhbGlkYXRvcjogc3RhcnRUaW1lQ2hlY2tvdXQsIHRyaWdnZXI6ICdibHVyJ31dLAogICAgICAgIGVuZFRpbWU6IFt7cmVxdWlyZWQ6IHRydWUsIHZhbGlkYXRvcjogZW5kVGltZUNoZWNrb3V0LCB0cmlnZ2VyOiAnYmx1cid9XQogICAgICB9CiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIGNvbnN0IGdpZCA9IHRoaXMuJHN0b3JlLnN0YXRlLmdpZDsKICAgIGNvbnN0IHVpZCA9IHRoaXMuJHN0b3JlLnN0YXRlLnVpZDsKICAgIGlmIChnaWQgPT09IHVuZGVmaW5lZCAmJiB1aWQgPT09IHVuZGVmaW5lZCkgewogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bnlKjmiLfkv6Hmga/lpLHotKXvvIEnKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi80MDQiKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY29udGVzdEZvcm0uZ3JvdXBJZCA9IGdpZDsKICAgICAgdGhpcy5jb250ZXN0Rm9ybS5wcm9tdWxnYXRvciA9IHVpZDsKICAgIH0KICAgIC8vIOWIpOaWreaYr+WQpuWtmOWcqGNvbnRlc3RJZO+8jOWtmOWcqOWImeaYr+S/ruaUue+8jOWQpuWImeaYr+aWsOWingogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5jb250ZXN0SWQpIHsKICAgICAgdGhpcy5hZGRPclVwZGF0ZSA9IGZhbHNlOwogICAgICB0aGlzLmJ0blRleHQgPSAn56uL5Y2z5L+u5pS5JzsKICAgICAgZG9jdW1lbnQudGl0bGUgPSAn5L+u5pS55q+U6LWbJzsKICAgICAgZ2V0UmVxdWVzdCgiL2NvbnRlc3RzLyIgKyB0aGlzLiRyb3V0ZS5wYXJhbXMuY29udGVzdElkKS50aGVuKChyZXMpID0+IHsKICAgICAgICBjb25zdCBkYXRhID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgdGhpcy5jb250ZXN0Rm9ybS5jb250ZXN0VGl0bGUgPSBkYXRhLmNvbnRlc3RUaXRsZTsKICAgICAgICAgIHRoaXMuY29udGVzdEZvcm0uY29udGVzdElkID0gdGhpcy4kcm91dGUucGFyYW1zLmNvbnRlc3RJZDsKICAgICAgICAgIHRoaXMuY29udGVzdEZvcm0uY29udGVzdFRleHQgPSBkYXRhLmNvbnRlc3RUZXh0OwogICAgICAgICAgdGhpcy5jb250ZXN0Rm9ybS51cmwgPSBkYXRhLnVybDsKICAgICAgICAgIHRoaXMuY29udGVzdEZvcm0ucmVnU3RhcnRUaW1lID0gZGF0YS5yZWdTdGFydFRpbWU7CiAgICAgICAgICB0aGlzLmNvbnRlc3RGb3JtLnJlZ0VuZFRpbWUgPSBkYXRhLnJlZ0VuZFRpbWU7CiAgICAgICAgICB0aGlzLmNvbnRlc3RGb3JtLnN0YXJ0VGltZSA9IGRhdGEuc3RhcnRUaW1lOwogICAgICAgICAgdGhpcy5jb250ZXN0Rm9ybS5lbmRUaW1lID0gZGF0YS5lbmRUaW1lOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLzQwNCIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBkb2N1bWVudC50aXRsZSA9ICflj5HluIPmr5TotZsnOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5o+Q5LqkCiAgICBzdWJtaXRGb3JtKCkgewogICAgICB0aGlzLiRyZWZzLmNvbnRlc3RGb3JtLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKHRoaXMuYWRkT3JVcGRhdGUpIHsKICAgICAgICAgICAgLy8g5re75YqgCiAgICAgICAgICAgIHBvc3RSZXF1ZXN0KCIvYWRkQ29udGVzdHMiLCB0aGlzLmNvbnRlc3RGb3JtKS50aGVuKChyZXNwKSA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlc3AuZGF0YS5kYXRhKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WPkeW4g+aIkOWKn+OAgicpOwogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9tYW5hZ2VtZW50Iik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WPkeW4g+Wksei0pe+8gScpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOS/ruaUuQogICAgICAgICAgICBwdXRSZXF1ZXN0KCIvdXBkYXRlQ29udGVzdHMiLCB0aGlzLmNvbnRlc3RGb3JtKS50aGVuKChyZXNwKSA9PiB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcC5kYXRhLmRhdGEpOwogICAgICAgICAgICAgIGlmIChyZXNwLmRhdGEuZGF0YSkgewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkv67mlLnmiJDlip/jgIInKTsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbWFuYWdlbWVudCIpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkv67mlLnlpLHotKXvvIEnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivt+S/ruaUuemUmeivr+mhue+8gSIpCiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDph43nva4KICAgIHJlc2V0Rm9ybSgpIHsKICAgICAgdGhpcy4kcmVmcy5jb250ZXN0Rm9ybS5yZXNldEZpZWxkcygpOwogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/layout/Main/Management/Competition","sourcesContent":["<template>\n  <div>\n    <!--表单-->\n    <el-form ref=\"contestForm\" :model=\"contestForm\" label-width=\"80px\" label-position=\"top\" :rules=\"rules\">\n      <!--输入比赛名称-->\n      <el-row :gutter=\"20\">\n        <el-col :span=\"16\" :offset=\"4\">\n          <el-card shadow=\"never\">\n            <el-form-item label=\"比赛名称\" prop=\"contestTitle\">\n              <el-input v-model=\"contestForm.contestTitle\" maxlength=\"50\" show-word-limit\n                        placeholder=\"输入比赛名称\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"图片url\" prop=\"url\">\n              <el-input v-model=\"contestForm.url\" maxlength=\"255\" show-word-limit\n                        placeholder=\"输入图片的地址，例如：https://pic.imgdb.cn/item/61e95e482ab3f51d91903853.jpg\"></el-input>\n            </el-form-item>\n          </el-card>\n        </el-col>\n      </el-row>\n      <el-row :gutter=\"20\">\n        <!--左侧编辑内容-->\n        <el-col :span=\"12\" :offset=\"4\">\n          <el-card shadow=\"never\" :body-style=\"{ padding: '0'}\">\n            <mdEditor v-model=\"contestForm.contestText\" :ishljs=\"true\" style=\"min-height: 600px\"/>\n          </el-card>\n        </el-col>\n        <!--右侧输入其他信息-->\n        <el-col :span=\"4\">\n          <el-card shadow=\"never\" style=\"min-height: 600px\">\n            <el-form-item label=\"报名开始时间\" prop=\"regStartTime\">\n              <el-date-picker v-model=\"contestForm.regStartTime\" type=\"datetime\" placeholder=\"选择日期时间\"\n                              default-time=\"08:00:00\" value-format=\"yyyy-MM-dd HH:mm:ss\"></el-date-picker>\n            </el-form-item>\n            <el-form-item label=\"报名结束时间\" prop=\"regEndTime\">\n              <el-date-picker v-model=\"contestForm.regEndTime\" type=\"datetime\" placeholder=\"选择日期时间\"\n                              default-time=\"23:59:59\" value-format=\"yyyy-MM-dd HH:mm:ss\"></el-date-picker>\n            </el-form-item>\n            <el-form-item label=\"比赛开始时间\" prop=\"startTime\">\n              <el-date-picker v-model=\"contestForm.startTime\" type=\"datetime\" placeholder=\"选择日期时间\"\n                              default-time=\"08:00:00\" value-format=\"yyyy-MM-dd HH:mm:ss\"></el-date-picker>\n            </el-form-item>\n            <el-form-item label=\"比赛结束时间\" prop=\"endTime\">\n              <el-date-picker v-model=\"contestForm.endTime\" type=\"datetime\" placeholder=\"选择日期时间\"\n                              default-time=\"23:59:59\" value-format=\"yyyy-MM-dd HH:mm:ss\"></el-date-picker>\n            </el-form-item>\n            <el-form-item style=\"float: right;padding-top: 60px\">\n              <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\n              <el-button type=\"primary\" @click=\"submitForm\">{{ btnText }}</el-button>\n            </el-form-item>\n          </el-card>\n        </el-col>\n      </el-row>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport {getRequest, postRequest, putRequest} from \"@/utils/api\";\n\nimport 'mavon-editor/dist/css/index.css'\n\nconst mdEditor = require('mavon-editor')\n\nexport default {\n  name: \"Competition\",\n  components: {\n    'mdEditor': mdEditor.mavonEditor\n  },\n  data() {\n    const regEndTimeCheckout = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('报名结束时间不能为空'));\n      } else if (value < this.contestForm.regStartTime) {\n        callback(new Error('报名结束时间不能小于报名开始时间'));\n      } else {\n        callback();\n      }\n    };\n    const startTimeCheckout = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('报名结束时间不能为空'));\n      } else if (value < this.contestForm.regEndTime) {\n        callback(new Error('比赛开始时间不能小于报名结束时间'));\n      } else {\n        callback();\n      }\n    };\n    const endTimeCheckout = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('报名结束时间不能为空'));\n      } else if (value < this.contestForm.startTime) {\n        callback(new Error('比赛结束时间不能小于比赛开始时间'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      addOrUpdate: true,\n      btnText: '立即发布',\n      contestForm: {\n        contestTitle: '',\n        contestText: '## 请输入比赛内容\\n',\n        url: '',\n        promulgator: 0,\n        groupId: 0,\n        regStartTime: '',\n        regEndTime: '',\n        startTime: '',\n        endTime: ''\n      },\n      rules: {\n        contestTitle: [{required: true, message: '请输入比赛名称', trigger: 'blur'}],\n        url: [{required: true, message: '请输入图片地址', trigger: 'blur'}],\n        regStartTime: [{required: true, message: '报名开始时间不能为空', trigger: 'blur'}],\n        regEndTime: [{required: true, validator: regEndTimeCheckout, trigger: 'blur'}],\n        startTime: [{required: true, validator: startTimeCheckout, trigger: 'blur'}],\n        endTime: [{required: true, validator: endTimeCheckout, trigger: 'blur'}]\n      }\n    };\n  },\n  mounted() {\n    const gid = this.$store.state.gid;\n    const uid = this.$store.state.uid;\n    if (gid === undefined && uid === undefined) {\n      this.$message.error('获取用户信息失败！');\n      this.$router.push(\"/404\");\n    } else {\n      this.contestForm.groupId = gid;\n      this.contestForm.promulgator = uid;\n    }\n    // 判断是否存在contestId，存在则是修改，否则是新增\n    if (this.$route.params.contestId) {\n      this.addOrUpdate = false;\n      this.btnText = '立即修改';\n      document.title = '修改比赛';\n      getRequest(\"/contests/\" + this.$route.params.contestId).then((res) => {\n        const data = res.data.data;\n        if (data) {\n          this.contestForm.contestTitle = data.contestTitle;\n          this.contestForm.contestId = this.$route.params.contestId;\n          this.contestForm.contestText = data.contestText;\n          this.contestForm.url = data.url;\n          this.contestForm.regStartTime = data.regStartTime;\n          this.contestForm.regEndTime = data.regEndTime;\n          this.contestForm.startTime = data.startTime;\n          this.contestForm.endTime = data.endTime;\n        } else {\n          this.$router.push(\"/404\");\n        }\n      });\n    } else {\n      document.title = '发布比赛';\n    }\n  },\n  methods: {\n    // 提交\n    submitForm() {\n      this.$refs.contestForm.validate((valid) => {\n        if (valid) {\n          if (this.addOrUpdate) {\n            // 添加\n            postRequest(\"/addContests\", this.contestForm).then((resp) => {\n              if (resp.data.data) {\n                this.$message.success('发布成功。');\n                this.$router.push(\"/management\");\n              } else {\n                this.$message.error('发布失败！');\n              }\n            })\n          } else {\n            // 修改\n            putRequest(\"/updateContests\", this.contestForm).then((resp) => {\n              console.log(resp.data.data);\n              if (resp.data.data) {\n                this.$message.success('修改成功。');\n                this.$router.push(\"/management\");\n              } else {\n                this.$message.error('修改失败！');\n              }\n            })\n          }\n        } else {\n          this.$message.error(\"请修改错误项！\")\n          return false;\n        }\n      });\n    },\n    // 重置\n    resetForm() {\n      this.$refs.contestForm.resetFields();\n    }\n  }\n}\n</script>\n\n<style scoped>\n.el-row {\n  margin-bottom: 20px;\n}\n\n.el-date-editor.el-input {\n  width: 100%;\n}\n</style>"]}]}