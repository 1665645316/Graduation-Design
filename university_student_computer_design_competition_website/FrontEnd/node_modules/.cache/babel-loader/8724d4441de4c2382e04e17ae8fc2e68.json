{"remainingRequest":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/babel-loader/lib/index.js!/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/src/views/layout/Main/Management/Message/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/src/views/layout/Main/Management/Message/index.vue","mtime":1646137301360},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1642048410000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/babel-loader/lib/index.js","mtime":1642048410000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1642048410000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/vue-loader/lib/index.js","mtime":1642048410000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/babel.config.js","mtime":1642426402000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1642048410000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/babel-loader/lib/index.js","mtime":1642048410000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1642048410000},{"path":"/Volumes/Code/Graduation_Design/university_student_computer_design_competition_website/FrontEnd/node_modules/vue-loader/lib/index.js","mtime":1642048410000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXRSZXF1ZXN0LCBwb3N0UmVxdWVzdCB9IGZyb20gIkAvdXRpbHMvYXBpIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNZXNzYWdlIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGFyYW1zOiB7fSwKICAgICAgLy8gY29udGVzdElkOicnLAogICAgICAvLyBjb250ZXN0VGl0bGU6JycsCiAgICAgIGRhdGE6IFtdLAogICAgICBtdWx0aXBsZVNlbGVjdGlvbjogW10sCiAgICAgIHRpdGxlOiAnJywKICAgICAgdGV4dDogJycKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLnBhcmFtcyA9IHRoaXMuJHJvdXRlLnBhcmFtczsKICAgIGdldFJlcXVlc3QoIi9zY29yZXMvdXNlcnMiLCB7CiAgICAgIGNpZDogdGhpcy5wYXJhbXMuY29udGVzdElkCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgX3RoaXMuZGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZTogZnVuY3Rpb24gaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHZhbCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24gPSBbXTsKICAgICAgdmFyIHNlbmRlciA9IHRoaXMuJHN0b3JlLnN0YXRlLnVpZDsKICAgICAgdmFsLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgIF90aGlzMi5tdWx0aXBsZVNlbGVjdGlvbi5wdXNoKHsKICAgICAgICAgIHJlY2lwaWVudDogdmFsLnVzZXJJZCwKICAgICAgICAgIHNlbmRlcjogc2VuZGVyCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNlbmQ6IGZ1bmN0aW9uIHNlbmQoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGxlbmd0aCA9IHRoaXMubXVsdGlwbGVTZWxlY3Rpb24ubGVuZ3RoOwoKICAgICAgaWYgKGxlbmd0aCAmJiB0aGlzLnRpdGxlLnRyaW0oKSAhPT0gJycgJiYgdGhpcy50ZXh0LnRyaW0oKSAhPT0gJycpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLiRzZXQodGhpcy5tdWx0aXBsZVNlbGVjdGlvbltpXSwgJ3RpdGxlJywgdGhpcy50aXRsZSk7CiAgICAgICAgICB0aGlzLiRzZXQodGhpcy5tdWx0aXBsZVNlbGVjdGlvbltpXSwgJ3RleHQnLCB0aGlzLnRleHQpOwogICAgICAgIH0gLy8gY29uc29sZS5sb2codGhpcy5tdWx0aXBsZVNlbGVjdGlvbik7CgoKICAgICAgICBwb3N0UmVxdWVzdCgiL21lc3NhZ2VzL3NhdmUiLCB0aGlzLm11bHRpcGxlU2VsZWN0aW9uKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLmRhdGEpOwoKICAgICAgICAgIGlmIChyZXMuZGF0YS5kYXRhKSB7CiAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZS5zdWNjZXNzKCLlj5HpgIHmiJDlip/jgIIiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZS5lcnJvcigi5Y+R6YCB5aSx6LSl77yBIik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCLor7flnKjlt6bkvqfli77pgInlrabnlJ/miJbmo4DmtYvmoIfpopjlhoXlrrnmmK/lkKbkuLrnqbrvvIEiKTsKICAgICAgfQogICAgfSwKICAgIGdvOiBmdW5jdGlvbiBnbyhkYXRhKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICB0aGlzLnBhcmFtcy5uYW1lID0gZGF0YS5uYW1lOwogICAgICB0aGlzLnBhcmFtcy5zY29yZXNJZCA9IGRhdGEuc2NvcmVzSWQ7CiAgICAgIHRoaXMucGFyYW1zLnBob25lID0gZGF0YS5waG9uZTsKICAgICAgdGhpcy5wYXJhbXMuc2Nob29sID0gZGF0YS5zY2hvb2w7CiAgICAgIHRoaXMucGFyYW1zLnVzZXJJZCA9IGRhdGEudXNlcklkOwogICAgICB0aGlzLnBhcmFtcy5zdGF0ZSA9IGRhdGEuc3RhdGU7IC8vIGNvbnNvbGUubG9nKHRoaXMucGFyYW1zKTsKCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnbWFuYWdlbWVudC1zY29yZScsCiAgICAgICAgcGFyYW1zOiB0aGlzLnBhcmFtcwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <el-row :gutter=\"20\">\n      <el-col :span=\"12\" :offset=\"4\">\n        <el-card>\n          <div slot=\"header\" class=\"clearfix\">\n            <span style=\"line-height: 28px;font-size: 20px\">发送消息请先选中</span>\n            <el-button style=\"float: right\" size=\"mini\" type=\"primary\" round @click=\"$router.push('/management')\">\n              返回\n            </el-button>\n          </div>\n          <el-table :data=\"data\" @selection-change=\"handleSelectionChange\" fit>\n            <el-table-column type=\"selection\"></el-table-column>\n            <el-table-column prop=\"name\" label=\"姓名\" align=\"center\"></el-table-column>\n            <el-table-column prop=\"school\" label=\"学校\" align=\"center\"></el-table-column>\n            <el-table-column prop=\"phone\" label=\"手机号\" align=\"center\"></el-table-column>\n            <el-table-column prop=\"state\" label=\"评审状态\" align=\"center\">\n              <template v-slot=\"scope\">\n                <el-tag :type=\"scope.row.state ? 'danger' : 'success'\" disable-transitions>\n                  {{ scope.row.state ? '已评审' : '未评审' }}\n                </el-tag>\n              </template>\n            </el-table-column>\n            <el-table-column fixed=\"right\" label=\"操作\" width=\"100%\" align=\"center\">\n              <template v-slot=\"scope\">\n                <el-button type=\"text\" size=\"small\" @click=\"go(scope.row)\">\n                  {{ scope.row.state ? '查看' : '评审' }}\n                </el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-card>\n      </el-col>\n      <el-col :span=\"4\">\n        <el-card>\n          <div slot=\"header\" class=\"clearfix\">\n            <span style=\"line-height: 28px;font-size: 20px\">发送消息</span>\n          </div>\n          <el-form label-position=\"top\">\n            <el-form-item label=\"标题\" prop=\"title\">\n              <el-input placeholder=\"请输入标题\" v-model=\"title\" maxlength=\"20\" show-word-limit\n                        :rules=\"[{ required: true, message: '标题不能为空'}]\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"内容\" prop=\"text\">\n              <el-input type=\"textarea\" :rows=\"5\" placeholder=\"请输入内容\" v-model=\"text\"\n                        :rules=\"[{ required: true, message: '内容不能为空'}]\"></el-input>\n            </el-form-item>\n            <el-form-item style=\"float: right\">\n              <el-button type=\"primary\" round @click=\"send\">发送</el-button>\n            </el-form-item>\n          </el-form>\n        </el-card>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport {getRequest, postRequest} from \"@/utils/api\";\n\nexport default {\n  name: \"Message\",\n  data() {\n    return {\n      params: {},\n      // contestId:'',\n      // contestTitle:'',\n      data: [],\n      multipleSelection: [],\n      title: '',\n      text: ''\n    }\n  },\n  mounted() {\n    this.params = this.$route.params;\n    getRequest(\"/scores/users\", {cid: this.params.contestId}).then((res) => {\n      this.data = res.data.data;\n    })\n  },\n  methods: {\n    handleSelectionChange(val) {\n      this.multipleSelection = [];\n      const sender = this.$store.state.uid;\n      val.forEach((val) => {\n        this.multipleSelection.push({recipient: val.userId, sender: sender});\n      });\n    },\n    send() {\n      let length = this.multipleSelection.length\n      if (length && this.title.trim() !== '' && this.text.trim() !== '') {\n        for (let i = 0; i < length; i++) {\n          this.$set(this.multipleSelection[i], 'title', this.title);\n          this.$set(this.multipleSelection[i], 'text', this.text);\n        }\n        // console.log(this.multipleSelection);\n        postRequest(\"/messages/save\", this.multipleSelection).then((res) => {\n          console.log(res.data.data);\n          if (res.data.data) {\n            this.$message.success(\"发送成功。\")\n          } else {\n            this.$message.error(\"发送失败！\")\n          }\n        });\n      } else {\n        this.$message.warning(\"请在左侧勾选学生或检测标题内容是否为空！\")\n      }\n    },\n    go(data) {\n      // console.log(data);\n      this.params.name = data.name;\n      this.params.scoresId = data.scoresId;\n      this.params.phone = data.phone;\n      this.params.school = data.school;\n      this.params.userId = data.userId;\n      this.params.state = data.state;\n      // console.log(this.params);\n      this.$router.push({name: 'management-score', params: this.params})\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/views/layout/Main/Management/Message"}]}