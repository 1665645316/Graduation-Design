{"version":3,"sources":["webpack:///./src/utils/login.js","webpack:///./src/views/Login/index.vue?c95d","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/Login/index.vue?34d8","webpack:///src/views/Login/index.vue","webpack:///./src/views/Login/index.vue?3e8b","webpack:///./src/views/Login/index.vue"],"names":["login","console","log","localStorage","phone","password","email","loginForm","postRequest","then","res","data","store","state","uid","userId","name","gid","groupId","isLogin","DESCRIPTORS","FUNCTION_NAME_EXISTS","EXISTS","uncurryThis","defineProperty","f","FunctionPrototype","Function","prototype","functionToString","toString","nameRE","regExpExec","exec","NAME","configurable","get","this","error","render","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","rules","staticStyle","_v","leaveTab","model","value","callback","$$v","$set","expression","captcha","on","updateCaptcha","checked","goToRegisterPage","_m","staticRenderFns","datetime","mounted","Date","getTime","$router","push","computed","methods","activeName","$refs","validate","valid","setItem","component"],"mappings":"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","file":"js/chunk-3baa8f03.268dd037.js","sourcesContent":["import store from \"@/store\";\nimport {Message} from \"element-ui\";\nimport {postRequest} from \"@/utils/api\";\n\n// 判断是否保存了账号信息，用于自动登录\nexport function login() {\n    console.log(\"自动登录\");\n    // localStorage存入账号密码\n    if (localStorage.phone && localStorage.password || localStorage.email) {\n        let loginForm = {\n            phone: localStorage.phone,\n            email: localStorage.email,\n            password: localStorage.password\n        }\n        postRequest(\"/automaticLogin\", loginForm).then((res) => {\n            let data = res.data.data;\n            if (data){\n                store.state.uid = data.userId;\n                store.state.name = data.name;\n                store.state.gid = data.groupId;\n                store.state.isLogin = true;\n            }\n        })\n    } else {\n        return false;\n    }\n    console.log(\"自动登录完成\");\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=32725fc4&scoped=true&lang=less&\"","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form',{ref:\"loginForm\",staticClass:\"loginContainer\",attrs:{\"rules\":_vm.rules,\"model\":_vm.loginForm}},[_c('h3',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"登录\")]),_c('el-tabs',{staticStyle:{\"height\":\"100px\"},attrs:{\"tab-position\":\"top\",\"stretch\":\"\",\"before-leave\":_vm.leaveTab}},[_c('el-tab-pane',{attrs:{\"label\":\"手机号登录\"}},[_c('el-form-item',{attrs:{\"prop\":\"phone\"}},[_c('el-input',{attrs:{\"tpye\":\"text\",\"placeholder\":\"请输入手机号\"},model:{value:(_vm.loginForm.phone),callback:function ($$v) {_vm.$set(_vm.loginForm, \"phone\", $$v)},expression:\"loginForm.phone\"}})],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"邮箱登录\"}},[_c('el-form-item',{attrs:{\"prop\":\"email\"}},[_c('el-input',{attrs:{\"tpye\":\"text\",\"placeholder\":\"请输入邮箱\"},model:{value:(_vm.loginForm.email),callback:function ($$v) {_vm.$set(_vm.loginForm, \"email\", $$v)},expression:\"loginForm.email\"}})],1)],1)],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"tpye\":\"text\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"captcha\"}},[_c('el-input',{staticStyle:{\"width\":\"60%\"},attrs:{\"tpye\":\"text\",\"placeholder\":\"点击图片更换验证码\"},model:{value:(_vm.loginForm.captcha),callback:function ($$v) {_vm.$set(_vm.loginForm, \"captcha\", $$v)},expression:\"loginForm.captcha\"}}),_c('img',{staticStyle:{\"float\":\"right\",\"cursor\":\"pointer\"},attrs:{\"src\":_vm.captcha,\"alt\":\"验证码\"},on:{\"click\":_vm.updateCaptcha}})],1),_c('el-form-item',{staticStyle:{\"margin-bottom\":\"0\"}},[_c('el-link',{staticClass:\"rememberMe\",attrs:{\"underline\":false}},[_c('el-checkbox',{model:{value:(_vm.checked),callback:function ($$v) {_vm.checked=$$v},expression:\"checked\"}},[_vm._v(\"保持登录\")])],1),_c('el-link',{staticClass:\"forgot\",attrs:{\"href\":\"https://zhangguapi.com\",\"target\":\"_blank\",\"underline\":false}},[_vm._v(\"忘记密码？\")])],1),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"48%\"},attrs:{\"type\":\"primary\",\"round\":\"\"},on:{\"click\":_vm.login}},[_vm._v(\"登录\")]),_c('el-button',{staticStyle:{\"width\":\"48%\",\"float\":\"right\"},attrs:{\"type\":\"success\",\"round\":\"\"},on:{\"click\":_vm.goToRegisterPage}},[_vm._v(\"注册\")])],1)],1),_vm._m(0)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"img\"},[_c('img',{attrs:{\"src\":\"https://i.loli.net/2019/04/23/5cbf0a3fe48e9.png\",\"alt\":\"\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-form :rules=\"rules\" ref=\"loginForm\" :model=\"loginForm\" class=\"loginContainer\">\n      <h3 style=\"text-align: center\">登录</h3>\n      <el-tabs tab-position=\"top\" style=\"height: 100px\" stretch :before-leave=\"leaveTab\">\n        <el-tab-pane label=\"手机号登录\">\n          <el-form-item prop=\"phone\">\n            <el-input tpye=\"text\" v-model=\"loginForm.phone\" placeholder=\"请输入手机号\"></el-input>\n          </el-form-item>\n        </el-tab-pane>\n        <el-tab-pane label=\"邮箱登录\">\n          <el-form-item prop=\"email\">\n            <el-input tpye=\"text\" v-model=\"loginForm.email\" placeholder=\"请输入邮箱\"></el-input>\n          </el-form-item>\n        </el-tab-pane>\n      </el-tabs>\n      <el-form-item prop=\"password\">\n        <el-input tpye=\"text\" v-model=\"loginForm.password\" placeholder=\"请输入密码\"></el-input>\n      </el-form-item>\n      <el-form-item prop=\"captcha\">\n        <el-input tpye=\"text\" v-model=\"loginForm.captcha\" placeholder=\"点击图片更换验证码\" style=\"width: 60%\"></el-input>\n        <img :src=\"captcha\" @click=\"updateCaptcha\" alt=\"验证码\"\n             style=\"float: right; cursor: pointer\"/>\n      </el-form-item>\n      <el-form-item style=\"margin-bottom: 0\">\n        <el-link :underline=\"false\" class=\"rememberMe\">\n          <el-checkbox v-model=\"checked\">保持登录</el-checkbox>\n        </el-link>\n        <el-link href=\"https://zhangguapi.com\" target=\"_blank\" :underline=\"false\" class=\"forgot\">忘记密码？</el-link>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" style=\"width: 48%\" @click=\"login\" round>登录</el-button>\n        <el-button type=\"success\" style=\"width: 48%; float: right\" @click=\"goToRegisterPage\" round>注册</el-button>\n      </el-form-item>\n    </el-form>\n    <div class=\"img\">\n      <img src=\"https://i.loli.net/2019/04/23/5cbf0a3fe48e9.png\" alt=\"\"/>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {postRequest} from \"@/utils/api\";\nimport {login} from \"@/utils/login\";\n\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      checked: true,\n      loginForm: {\n        phone: \"\",\n        email: \"\",\n        password: \"\",\n        datetime: \"\",\n        captcha: \"\",\n      },\n      rules: {\n        password: [{required: true, message: \"密码不能为空\", trigger: \"blur\"},],\n        captcha: [{required: true, message: \"验证码不能为空\", trigger: \"blur\"},],\n      },\n    };\n  },\n  mounted() {\n    // 页面启动给datetime赋值时间戳\n    this.loginForm.datetime = new Date().getTime();\n    // 判断是否存在登录信息\n    if (login()) {\n      this.$router.push(\"/home\");\n    }\n  },\n  computed: {\n    captcha() {\n      return '/api/captcha?dateTime=' + this.loginForm.datetime;\n    }\n  },\n  methods: {\n    // 点击更换验证码（将来更换验证方式）\n    updateCaptcha() {\n      this.loginForm.datetime = new Date().getTime();\n    },\n    /**\n     * 根据tabs标签页返回相应的验证规则\n     * @param activeName 切换标签后的新值\n     */\n    leaveTab(activeName) {\n      // alert(activeName)\n      switch (activeName) {\n        case '0':\n          delete this.rules.email;\n          this.rules.phone = [{required: true, message: \"手机号不能为空\", trigger: \"blur\"},];\n          this.loginForm.phone = \"\";\n          break;\n        case '1':\n          delete this.rules.phone;\n          this.rules.email = [{required: true, message: \"邮箱不能为空\", trigger: \"blur\"},];\n          this.loginForm.email = \"\";\n          break;\n      }\n      this.loginForm.password = \"\";\n\n\n    },\n    //登录点击事件\n    login() {\n      this.$refs.loginForm.validate((valid) => {\n        if (valid) {\n          postRequest(\"/login\", this.loginForm).then((res) => {\n            const data = res.data.data;\n            console.log(data);\n            if (this.checked) {\n              localStorage.setItem(\"phone\", this.loginForm.phone);\n              localStorage.setItem(\"email\", this.loginForm.email);\n              localStorage.setItem(\"password\", this.$md5(this.loginForm.password));\n            }\n            this.$store.state.uid = data.userId;\n            this.$store.state.name = data.name;\n            this.$store.state.gid = data.groupId;\n            this.$store.state.isLogin = true;\n            this.$router.push(\"/home\");\n          }).catch((error) => {\n            console.log(error)\n          });\n        } else {\n          this.$message.error(\"请输入完整！\");\n        }\n      });\n    },\n    //跳转注册页面\n    goToRegisterPage() {\n      this.$router.push(\"/register\");\n    }\n  },\n};\n</script>\n<style scoped lang=\"less\">\n.loginContainer {\n  border-radius: 15px;\n  background-clip: padding-box;\n  margin: 180px auto;\n  width: 350px;\n  padding: 15px 35px;\n  background: #fff;\n  border: 1px solid #eeeeee;\n  box-shadow: 0 0 25px #cac6c6;\n}\n\n.rememberMe {\n  margin: 0 0 10px 0;\n}\n\n.forgot {\n  float: right;\n  margin: 0 0 10px 0;\n}\n\n.el-tabs {\n  margin-bottom: 22px;\n}\n\n.img {\n  margin-top: -150px;\n  text-align: center;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=32725fc4&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=32725fc4&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32725fc4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}