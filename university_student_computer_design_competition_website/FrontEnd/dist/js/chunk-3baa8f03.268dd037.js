(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3baa8f03"],{"231d":function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));o("b0c0");var a=o("4360"),r=o("7c15");function i(){if(console.log("自动登录"),!(localStorage.phone&&localStorage.password||localStorage.email))return!1;var e={phone:localStorage.phone,email:localStorage.email,password:localStorage.password};Object(r["c"])("/automaticLogin",e).then((function(e){var t=e.data.data;t&&(a["a"].state.uid=t.userId,a["a"].state.name=t.name,a["a"].state.gid=t.groupId,a["a"].state.isLogin=!0)})),console.log("自动登录完成")}},"568c":function(e,t,o){"use strict";o("deb9")},b0c0:function(e,t,o){var a=o("83ab"),r=o("5e77").EXISTS,i=o("e330"),l=o("9bf2").f,n=Function.prototype,s=i(n.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,m=i(c.exec),u="name";a&&!r&&l(n,u,{configurable:!0,get:function(){try{return m(c,s(this))[1]}catch(e){return""}}})},d9c9:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"loginForm",staticClass:"loginContainer",attrs:{rules:e.rules,model:e.loginForm}},[o("h3",{staticStyle:{"text-align":"center"}},[e._v("登录")]),o("el-tabs",{staticStyle:{height:"100px"},attrs:{"tab-position":"top",stretch:"","before-leave":e.leaveTab}},[o("el-tab-pane",{attrs:{label:"手机号登录"}},[o("el-form-item",{attrs:{prop:"phone"}},[o("el-input",{attrs:{tpye:"text",placeholder:"请输入手机号"},model:{value:e.loginForm.phone,callback:function(t){e.$set(e.loginForm,"phone",t)},expression:"loginForm.phone"}})],1)],1),o("el-tab-pane",{attrs:{label:"邮箱登录"}},[o("el-form-item",{attrs:{prop:"email"}},[o("el-input",{attrs:{tpye:"text",placeholder:"请输入邮箱"},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email",t)},expression:"loginForm.email"}})],1)],1)],1),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{tpye:"text",placeholder:"请输入密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),o("el-form-item",{attrs:{prop:"captcha"}},[o("el-input",{staticStyle:{width:"60%"},attrs:{tpye:"text",placeholder:"点击图片更换验证码"},model:{value:e.loginForm.captcha,callback:function(t){e.$set(e.loginForm,"captcha",t)},expression:"loginForm.captcha"}}),o("img",{staticStyle:{float:"right",cursor:"pointer"},attrs:{src:e.captcha,alt:"验证码"},on:{click:e.updateCaptcha}})],1),o("el-form-item",{staticStyle:{"margin-bottom":"0"}},[o("el-link",{staticClass:"rememberMe",attrs:{underline:!1}},[o("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("保持登录")])],1),o("el-link",{staticClass:"forgot",attrs:{href:"https://zhangguapi.com",target:"_blank",underline:!1}},[e._v("忘记密码？")])],1),o("el-form-item",[o("el-button",{staticStyle:{width:"48%"},attrs:{type:"primary",round:""},on:{click:e.login}},[e._v("登录")]),o("el-button",{staticStyle:{width:"48%",float:"right"},attrs:{type:"success",round:""},on:{click:e.goToRegisterPage}},[e._v("注册")])],1)],1),e._m(0)],1)},r=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"img"},[o("img",{attrs:{src:"https://i.loli.net/2019/04/23/5cbf0a3fe48e9.png",alt:""}})])}],i=(o("b0c0"),o("7c15")),l=o("231d"),n={name:"Login",data:function(){return{checked:!0,loginForm:{phone:"",email:"",password:"",datetime:"",captcha:""},rules:{password:[{required:!0,message:"密码不能为空",trigger:"blur"}],captcha:[{required:!0,message:"验证码不能为空",trigger:"blur"}]}}},mounted:function(){this.loginForm.datetime=(new Date).getTime(),Object(l["a"])()&&this.$router.push("/home")},computed:{captcha:function(){return"/api/captcha?dateTime="+this.loginForm.datetime}},methods:{updateCaptcha:function(){this.loginForm.datetime=(new Date).getTime()},leaveTab:function(e){switch(e){case"0":delete this.rules.email,this.rules.phone=[{required:!0,message:"手机号不能为空",trigger:"blur"}],this.loginForm.phone="";break;case"1":delete this.rules.phone,this.rules.email=[{required:!0,message:"邮箱不能为空",trigger:"blur"}],this.loginForm.email="";break}this.loginForm.password=""},login:function(){var e=this;this.$refs.loginForm.validate((function(t){t?Object(i["c"])("/login",e.loginForm).then((function(t){var o=t.data.data;console.log(o),e.checked&&(localStorage.setItem("phone",e.loginForm.phone),localStorage.setItem("email",e.loginForm.email),localStorage.setItem("password",e.$md5(e.loginForm.password))),e.$store.state.uid=o.userId,e.$store.state.name=o.name,e.$store.state.gid=o.groupId,e.$store.state.isLogin=!0,e.$router.push("/home")})).catch((function(e){console.log(e)})):e.$message.error("请输入完整！")}))},goToRegisterPage:function(){this.$router.push("/register")}}},s=n,c=(o("568c"),o("2877")),m=Object(c["a"])(s,a,r,!1,null,"32725fc4",null);t["default"]=m.exports},deb9:function(e,t,o){}}]);
//# sourceMappingURL=chunk-3baa8f03.268dd037.js.map